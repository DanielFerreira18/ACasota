@page "/"
@using System.Collections
@using ACasotaBlazorServer.Data

<PageTitle>Index</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

<SurveyPrompt Title="How is Blazor working for you?" />

<AuthorizeView>
	<Authorized>
		<p>Hello , @context.User.Identity.Name!</p>
	</Authorized>
	<NotAuthorized>
		<p role="status">You are not authorized to see this component</p>
	</NotAuthorized>
</AuthorizeView>

@code{
	[CascadingParameter]
	public Task<AuthenticationState> AuthenticationStateTask { get; set; }
	
	protected override async Task OnInitializedAsync()
	{
		var authState = await AuthenticationStateTask;
		var user = authState.User;

		if (user.Identity.IsAuthenticated)
		{
			//se quiser mandar alguma coisa 
		}
	}
}
