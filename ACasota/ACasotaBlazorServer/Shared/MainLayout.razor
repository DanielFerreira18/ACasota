@using ACasotaBlazorServer.Data;
@using Microsoft.AspNetCore.Identity;
@inherits LayoutComponentBase
@inject IJSRuntime JSRuntime
@inject UserManager<ApplicationUser> _userManager

<PageTitle>ACasota</PageTitle>

<AuthorizeView Context="AuthorizeAdmin">
    <Authorized>
        <NavMenu />
        <main class="content">
            @Body
        </main>
    </Authorized>
    <NotAuthorized>
        <NavMenu />
        <!-- Masthead-->
        <header class="masthead">
            <div class="container-homepage">
                <div class="row">
                    <div class="col-md-6-custom">
                        <div class="masthead-subheading">Bem-vindo à nossa associação!</div>
                        <div class="masthead-heading text-uppercase">Apoia os nossos patudos</div>
                        <a class="btn-homepage btn-homepage-secondary btn-homepage-xl text-uppercase" href="#atividades">Explora</a>
                    </div>
                    <div class="col-md-6-custom">
                        <img class="image-Background" src="../../assets/img/homepage/img/catowner2.png" alt="">
                    </div>
                </div>
            </div>
        </header>
        <!-- Services-->
        <section class="page-section bg-white" id="atividades">
            <div class="container-homepage">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">As nossas atividades</h2>
                    <h3 class="section-subheading text-muted"> </h3>
                </div>
                <div class="row text-center">
                    <div class="col-md-4">
                        <span class="fa-stack fa-4x">
                            <i class="fas fa-circle fa-stack-2x text-primary-homepage"></i>
                            <i class="fas fa-paw fa-stack-1x fa-inverse"></i>
                        </span>
                        <h4 class="my-3">Resgate Animal</h4>
                        <p class="text-muted">
                            A nossa associação procura e resgata animais de rua, junta-te a nós e com o teu auxilio, ajuda-nos a salvar os animais abandonados.
                        </p>
                    </div>
                    <div class="col-md-4">
                        <span class="fa-stack fa-4x">
                            <i class="fas fa-circle fa-stack-2x text-primary-homepage"></i>
                            <i class="fas fa-users fa-stack-1x fa-inverse"></i>
                        </span>
                        <h4 class="my-3">Eventos Volutarios</h4>
                        <p class="text-muted">
                            Procuramos realizar vários eventos paras que novas pessoas possam reconhecer o quão importante é a nossa missão, junta-te a nós.
                        </p>
                    </div>
                    <div class="col-md-4">
                        <span class="fa-stack fa-4x">
                            <i class="fas fa-circle fa-stack-2x text-primary-homepage"></i>
                            <i class="fas fa-cat fa-stack-1x fa-inverse"></i>
                        </span>
                        <h4 class="my-3">Adoção Responsável</h4>
                        <p class="text-muted">
                            Cuida-mos de todos os animais que são recolhidos, mas o melhor é encontrar uma casa para eles, adota um animal e terás um amigo.
                        </p>
                    </div>
                </div>
            </div>
        </section>
        <!-- Portfolio Grid-->
        <section class="page-section bg-white" id="animal">
            <div class="container-homepage">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Os nossos animais</h2>
                    <h3 class="section-subheading text-muted">Todos precisam de uma casa</h3>
                </div>
                <div class="row">
                    <div class="col-lg-4 col-sm-6 mb-4">
                        <!-- Portfolio item 1-->
                        <div class="portfolio-item">
                            <img class="img-fluid" src="../../assets/img/homepage/img/portfolio/1.jpg" alt="..." />
                            <div class="portfolio-caption">
                                <div class="portfolio-caption-heading">Threads</div>
                                <div class="portfolio-caption-subheading text-muted">Illustration</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-sm-6 mb-4">
                        <!-- Portfolio item 2-->
                        <div class="portfolio-item">
                            <img class="img-fluid" src="../../assets/img/homepage/img/portfolio/2.jpg" alt="..." />
                            <div class="portfolio-caption">
                                <div class="portfolio-caption-heading">Explore</div>
                                <div class="portfolio-caption-subheading text-muted">Graphic Design</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-sm-6 mb-4">
                        <!-- Portfolio item 3-->
                        <div class="portfolio-item">
                            <img class="img-fluid" src="../../assets/img/homepage/img/portfolio/3.jpg" alt="..." />
                            <div class="portfolio-caption">
                                <div class="portfolio-caption-heading">Finish</div>
                                <div class="portfolio-caption-subheading text-muted">Identity</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-sm-6 mb-4 mb-lg-0">
                        <!-- Portfolio item 4-->
                        <div class="portfolio-item">
                            <img class="img-fluid" src="../../assets/img/homepage/img/portfolio/4.jpg" alt="..." />
                            <div class="portfolio-caption">
                                <div class="portfolio-caption-heading">Lines</div>
                                <div class="portfolio-caption-subheading text-muted">Branding</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-sm-6 mb-4 mb-sm-0">
                        <!-- Portfolio item 5-->
                        <div class="portfolio-item">
                            <img class="img-fluid" src="../../assets/img/homepage/img/portfolio/5.jpg" alt="..." />
                            <div class="portfolio-caption">
                                <div class="portfolio-caption-heading">Southwest</div>
                                <div class="portfolio-caption-subheading text-muted">Website Design</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-sm-6">
                        <!-- Portfolio item 6-->
                        <div class="portfolio-item">
                            <img class="img-fluid" src="../../assets/img/homepage/img/portfolio/6.jpg" alt="..." />
                            <div class="portfolio-caption">
                                <div class="portfolio-caption-heading">Window</div>
                                <div class="portfolio-caption-subheading text-muted">Photography</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Team-->
        <section class="page-section" id="team">
            <div class="container-homepage">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">A nossa equipa</h2>
                    <h3 class="section-subheading text-muted">Estas são as pessoas responsaveis pela a associação, conhece-os.</h3>
                </div>
                <div class="row">
                    <div class="col-lg-4">
                        <div class="team-member">
                            <img class="mx-auto rounded-circle" src="../../assets/img/homepage/img/team/1.jpg" alt="..." />
                            <h4>Parveen Anand</h4>
                            <p class="text-muted">Lead Designer</p>
                            <a class="btn-homepage btn-homepage-dark btn-homepage-social mx-2" href="#!" aria-label="Parveen Anand Twitter Profile">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a class="btn-homepage btn-homepage-dark btn-homepage-social mx-2" href="#!" aria-label="Parveen Anand Facebook Profile">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <a class="btn-homepage btn-homepage-dark btn-homepage-social mx-2" href="#!" aria-label="Parveen Anand LinkedIn Profile">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="team-member">
                            <img class="mx-auto rounded-circle" src="../../assets/img/homepage/img/team/2.jpg" alt="..." />
                            <h4>Diana Petersen</h4>
                            <p class="text-muted">Lead Marketer</p>
                            <a class="btn-homepage btn-homepage-dark btn-homepage-social mx-2" href="#!" aria-label="Diana Petersen Twitter Profile">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a class="btn-homepage btn-homepage-dark btn-homepage-social mx-2" href="#!"
                               aria-label="Diana Petersen Facebook Profile"><i class="fab fa-facebook-f"></i></a>
                            <a class="btn-homepage btn-homepage-dark btn-homepage-social mx-2" href="#!"
                               aria-label="Diana Petersen LinkedIn Profile"><i class="fab fa-linkedin-in"></i></a>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="team-member">
                            <img class="mx-auto rounded-circle" src="../../assets/img/homepage/img/team/3.jpg" alt="..." />
                            <h4>Larry Parker</h4>
                            <p class="text-muted">Lead Developer</p>
                            <a class="btn-homepage btn-homepage-dark btn-homepage-social mx-2" href="#!" aria-label="Larry Parker Twitter Profile">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a class="btn-homepage btn-homepage-dark btn-homepage-social mx-2" href="#!" aria-label="Larry Parker Facebook Profile">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <a class="btn-homepage btn-homepage-dark btn-homepage-social mx-2" href="#!" aria-label="Larry Parker LinkedIn Profile">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Contact-->
        <section class="page-section" id="contact">
            <div class="container-homepage">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Contact Us</h2>
                </div>
                <div class="container-homepage px-4 px-lg-5">
                    <div class="row gx-4 gx-lg-5">
                        <div class="col-md-4 mb-3 mb-md-0">
                            <div class="card py-4 h-100">
                                <div class="card-body text-center">
                                    <i class="fas fa-map-marked-alt text-primary-homepage mb-2"></i>
                                    <h4 class="text-uppercase m-0">Morada</h4>
                                    <hr class="my-4 mx-auto" />
                                    <div class="small text-black-50">R. Francisco Salgado Zenha, 6300-035 Guarda</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3 mb-md-0">
                            <div class="card py-4 h-100">
                                <div class="card-body text-center">
                                    <i class="fas fa-envelope text-primary-homepage mb-2"></i>
                                    <h4 class="text-uppercase m-0">Email</h4>
                                    <hr class="my-4 mx-auto" />
                                    <div class="small text-black-50">acasota@gmail.com</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3 mb-md-0">
                            <div class="card py-4 h-100">
                                <div class="card-body text-center">
                                    <i class="fas fa-mobile-alt text-primary-homepage mb-2"></i>
                                    <h4 class="text-uppercase m-0">Telemovel</h4>
                                    <hr class="my-4 mx-auto" />
                                    <div class="small text-black-50">+351 967 243 606</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Footer-->
        <footer class="footer py-4">
            <div class="container-homepage">
                <div class="row align-items-center">
                    <div class="col-lg-4 text-lg-start">Copyright &copy; Your Website 2022</div>
                    <div class="col-lg-4 my-3 my-lg-0">
                        <a class="btn-homepage btn-homepage-dark btn-homepage-social mx-2" href="#!" aria-label="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a class="btn-homepage btn-homepage-dark btn-homepage-social mx-2" href="https://www.facebook.com/acasota/?locale=pt_PT" aria-label="Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a class="btn-homepage btn-homepage-dark btn-homepage-social mx-2" href="#!" aria-label="LinkedIn">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                    </div>
                    <div class="col-lg-4 text-lg-end">
                        <a class="link-dark text-decoration-none me-3" href="#!">Privacy Policy</a>
                        <a class="link-dark text-decoration-none" href="#!">Terms of Use</a>
                    </div>
                </div>
            </div>
        </footer>
    </NotAuthorized>
</AuthorizeView>
<AnchorNavigation />

@code {
    [CascadingParameter]
    public Task<AuthenticationState> AuthenticationStateTask { get; set; }
    public ApplicationUser user_auth { get; set; } = new ApplicationUser();

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JSRuntime.InvokeVoidAsync("NavScrollSpy");
        }
    }

    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthenticationStateTask;
        var user = authState.User;

        if (user.Identity.IsAuthenticated)
        {
            user_auth = await _userManager.GetUserAsync(user);
        }
    }
}
